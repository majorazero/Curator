(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{151:function(e,r,n){"use strict";var o=n(2),t=n(58);function a(){var e=Object(o.a)(["\n  query Leaderboard($limit: Int) {\n    leaderboard(limit: $limit) {\n      username\n      country\n      rank\n      score\n    }\n  }\n"]);return a=function(){return e},e}var i=n.n(t)()(a());r.a=i},165:function(e,r,n){"use strict";var o=n(2),t=n(58);function a(){var e=Object(o.a)(["\n  query User($username: String!) {\n    user(username: $username) {\n      username\n      createdAt\n      country\n      score\n      leaderboard {\n        username\n        country\n        rank\n        score\n      }\n      levelsClimbed\n    }\n  }\n"]);return a=function(){return e},e}var i=n.n(t)()(a());r.a=i},381:function(e,r,n){"use strict";n.r(r);var o=n(157),t=n(16),a=n.n(t),i=n(25),d=n(38),c=n(39),u=n(41),s=n(40),l=n(42),g=n(2),b=n(0),p=n.n(b),f=n(3),h=n(43),v=n(67),k=n(324),m=n(323),B=n.n(m),y="\n  declare class Space {\n    /**\n     * Returns the relative location of this space as the number of spaces forward and to the right of your position.\n     *\n     * @returns {number[]} The relative location of this space as the offset [forward, right].\n     */\n    getLocation(): number[]\n\n    /**\n     * Determines if nothing (except maybe stairs) is at this space.\n     *\n     * @returns {boolean} Whether this space is empty or not.\n     */\n    isEmpty(): boolean\n\n    /**\n     * Determines if the stairs are at this space.\n     *\n     * @returns {boolean} Whether the stairs are at this space or not.\n     */\n    isStairs(): boolean\n\n    /**\n     * Determines if this is the edge of the level.\n     *\n     * @returns {boolean} Whether this space is a wall or not.\n     */\n    isWall(): boolean\n\n    /**\n     * Determines if there's a unit at this space.\n     *\n     * @returns {boolean} Whether a unit is at this space or not.\n     */\n    isUnit(): boolean\n\n    /**\n     * Returns the unit located at this space (if any).\n     *\n     * @returns {Unit} The unit at this location (if any).\n     */\n    getUnit(): Unit?\n  }\n\n  declare class Unit {\n    /**\n     * Determines if the unit is bound.\n     *\n     * @returns {boolean} Whether this unit is bound or not.\n     */\n    isBound(): boolean\n\n    /**\n     * Determines if the unit is an enemy.\n     *\n     * @returns {boolean} Whether this is an enemy unit or not.\n     */\n    isEnemy(): boolean\n  }\n";function w(e){var r=e.name,n=e.description,o="",t="";/given direction/.test(n)?(o="@param {string} [direction] The direction.",t="direction?: string"):/given space/.test(n)?(o="@param {Space} space The space.",t="space: Space"):"think"===r&&(o="@param {string} [thought] The thought.",t="thought?: string");var a="",i="void";if(/Returns an integer/.test(n)){var d="";/representing your health/.test(n)?d="The health.":/representing your maximum health/.test(n)?d="The maximum health.":/representing the distance/.test(n)&&(d="The distance."),a="@returns {number} ".concat(d),i="number"}else/Returns the direction/.test(n)?(a="@returns {string} The direction.",i="string"):/Returns the (adjacent )?space/.test(n)?(a="@returns {Space} The space.",i="Space"):/Returns an array of (up to \d+ |all )?spaces/.test(n)&&(a="@returns {Space[]} The spaces.",i="Space[]");return"\n    /**\n     * ".concat(n,"\n     *\n     * ").concat(o,"\n     *\n     * ").concat(a,"\n     */\n    ").concat(r,"(").concat(t,"): ").concat(i,"\n  ")}var C=function(e){return function(e){return"\n    declare class Warrior {\n      ".concat(e.map(w).join("\n\n"),"\n    }\n  ")}(e)+y};function F(){var e=Object(g.a)(["\n  height: 100%;\n  width: 100%;\n"]);return F=function(){return e},e}k.a.defineTheme("nord",{base:"vs-dark",inherit:!0,rules:[{token:"",foreground:"#d8dee9ff",background:"#2e3440ff"},{token:"invalid",foreground:"#d8dee9"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"comment",foreground:"#4c566a"},{token:"variable",foreground:"#d8dee9"},{token:"variable.language",foreground:"#81a1c1"},{token:"variable.parameter",foreground:"#d8dee9"},{token:"constant",foreground:"#81a1c1"},{token:"constant.character",foreground:"#ebcb8b"},{token:"constant.character.escape",foreground:"#ebcb8b"},{token:"constant.language",foreground:"#81a1c1"},{token:"constant.numeric",foreground:"#b48ead"},{token:"constant.regexp",foreground:"#ebcb8b"},{token:"entity.name.class",foreground:"#8fbcbb"},{token:"entity.name.type.class",foreground:"#8fbcbb"},{token:"entity.name.function",foreground:"#88c0d0"},{token:"number",foreground:"#b48ead"},{token:"regexp",foreground:"#ebcb8b"},{token:"type",foreground:"#8fbcbb"},{token:"delimiter",foreground:"#d8dee9"},{token:"key",foreground:"#a3be8c"},{token:"string",foreground:"#a3be8c"},{token:"keyword",foreground:"#81a1c1"}],colors:{"activityBar.background":"#2e3440","activityBar.dropBackground":"#3b4252","activityBar.foreground":"#d8dee9","activityBarBadge.background":"#88c0d0","activityBarBadge.foreground":"#2e3440","badge.background":"#88c0d0","badge.foreground":"#2e3440","button.background":"#434c5e","button.foreground":"#d8dee9","button.hoverBackground":"#4c566a","dropdown.background":"#3b4252","dropdown.border":"#3b4252","dropdown.foreground":"#d8dee9","editor.background":"#2e3440","editor.findMatchBackground":"#88c0d066","editor.findMatchHighlightBackground":"#88c0d033","editor.findRangeHighlightBackground":"#88c0d033","editor.foreground":"#d8dee9","editor.hoverHighlightBackground":"#3b4252","editor.inactiveSelectionBackground":"#434c5ecc","editor.lineHighlightBackground":"#434c5e52","editor.lineHighlightBorder":"#434c5e52","editor.rangeHighlightBackground":"#434c5e52","editor.selectionBackground":"#434c5ecc","editor.selectionHighlightBackground":"#434c5ecc","editor.wordHighlightBackground":"#81a1c166","editor.wordHighlightStrongBackground":"#81a1c199","editorBracketMatch.background":"#2e344000","editorBracketMatch.border":"#88c0d0","editorCodeLens.foreground":"#4c566a","editorCursor.foreground":"#d8dee9","editorError.border":"#bf616a00","editorError.foreground":"#bf616a","editorGroup.background":"#2e3440","editorGroup.border":"#3b425200","editorGroup.dropBackground":"#3b425299","editorGroupHeader.noTabsBackground":"#2e3440","editorGroupHeader.tabsBackground":"#2e3440","editorGroupHeader.tabsBorder":"#3b425200","editorGutter.addedBackground":"#a3be8c","editorGutter.background":"#2e3440","editorGutter.deletedBackground":"#bf616a","editorGutter.modifiedBackground":"#ebcb8b","editorHoverWidget.background":"#3b4252","editorHoverWidget.border":"#3b4252","editorIndentGuide.activeBackground":"#4c566a","editorIndentGuide.background":"#434c5eb3","editorLineNumber.foreground":"#d8dee966","editorLink.activeForeground":"#88c0d0","editorMarkerNavigation.background":"#5e81acc0","editorMarkerNavigationError.background":"#bf616ac0","editorMarkerNavigationWarning.background":"#ebcb8bc0","editorOverviewRuler.addedForeground":"#a3be8c","editorOverviewRuler.border":"#3b4252","editorOverviewRuler.currentContentForeground":"#3b4252","editorOverviewRuler.deletedForeground":"#bf616a","editorOverviewRuler.errorForeground":"#bf616a","editorOverviewRuler.findMatchForeground":"#88c0d066","editorOverviewRuler.incomingContentForeground":"#3b4252","editorOverviewRuler.infoForeground":"#81a1c1","editorOverviewRuler.modifiedForeground":"#ebcb8b","editorOverviewRuler.rangeHighlightForeground":"#88c0d066","editorOverviewRuler.selectionHighlightForeground":"#88c0d066","editorOverviewRuler.warningForeground":"#ebcb8b","editorOverviewRuler.wordHighlightForeground":"#88c0d066","editorOverviewRuler.wordHighlightStrongForeground":"#88c0d066","editorRuler.foreground":"#434c5e","editorSuggestWidget.background":"#2e3440","editorSuggestWidget.border":"#3b4252","editorSuggestWidget.foreground":"#d8dee9","editorSuggestWidget.highlightForeground":"#88c0d0","editorSuggestWidget.selectedBackground":"#434c5e","editorWarning.border":"#ebcb8b00","editorWarning.foreground":"#ebcb8b","editorWhitespace.foreground":"#4c566ab3","editorWidget.background":"#2e3440","extensionButton.prominentBackground":"#434c5e","extensionButton.prominentForeground":"#d8dee9","extensionButton.prominentHoverBackground":"#4c566a","input.background":"#3b4252","input.border":"#3b4252","input.foreground":"#d8dee9","input.placeholderForeground":"#d8dee999","inputOption.activeBorder":"#88c0d0","inputValidation.errorBackground":"#bf616a","inputValidation.errorBorder":"#bf616a","inputValidation.infoBackground":"#81a1c1","inputValidation.infoBorder":"#81a1c1","inputValidation.warningBackground":"#d08770","inputValidation.warningBorder":"#d08770","list.activeSelectionBackground":"#88c0d0","list.activeSelectionForeground":"#2e3440","list.dropBackground":"#88c0d099","list.errorForeground":"#bf616a","list.focusBackground":"#88c0d099","list.focusForeground":"#d8dee9","list.highlightForeground":"#88c0d0","list.hoverBackground":"#3b4252","list.hoverForeground":"#eceff4","list.inactiveSelectionBackground":"#434c5e","list.inactiveSelectionForeground":"#d8dee9","list.warningForeground":"#ebcb8b","merge.border":"#3b425200","merge.currentContentBackground":"#81a1c14d","merge.currentHeaderBackground":"#81a1c166","merge.incomingContentBackground":"#8fbcbb4d","merge.incomingHeaderBackground":"#8fbcbb66","notification.background":"#3b4252","notification.buttonBackground":"#434c5e","notification.buttonForeground":"#d8dee9","notification.buttonHoverBackground":"#4c566a","notification.errorBackground":"#bf616a","notification.errorForeground":"#2e3440","notification.foreground":"#d8dee9","notification.infoBackground":"#88c0d0","notification.infoForeground":"#2e3440","notification.warningBackground":"#ebcb8b","notification.warningForeground":"#2e3440","panel.background":"#2e3440","panel.border":"#3b4252","panelTitle.activeBorder":"#88c0d000","panelTitle.activeForeground":"#88c0d0","panelTitle.inactiveForeground":"#d8dee9","peekView.border":"#4c566a","peekViewEditor.background":"#2e3440","peekViewEditor.matchHighlightBackground":"#88c0d0cc","peekViewEditorGutter.background":"#2e3440","peekViewResult.background":"#2e3440","peekViewResult.fileForeground":"#88c0d0","peekViewResult.lineForeground":"#d8dee966","peekViewResult.matchHighlightBackground":"#88c0d0cc","peekViewResult.selectionBackground":"#434c5e","peekViewResult.selectionForeground":"#d8dee9","peekViewTitle.background":"#3b4252","peekViewTitleDescription.foreground":"#d8dee9","peekViewTitleLabel.foreground":"#88c0d0","pickerGroup.border":"#3b4252","pickerGroup.foreground":"#d8dee9","progressBar.background":"#88c0d0","scrollbar.shadow":"#00000066","scrollbarSlider.activeBackground":"#434c5eaa","scrollbarSlider.background":"#434c5e99","scrollbarSlider.hoverBackground":"#434c5eaa","selection.background":"#88c0d099","sideBar.background":"#2e3440","sideBar.border":"#3b4252","sideBar.foreground":"#d8dee9","sideBarSectionHeader.background":"#3b4252","sideBarSectionHeader.foreground":"#d8dee9","sideBarTitle.foreground":"#d8dee9","statusBar.background":"#3b4252","statusBar.border":"#3b425200","statusBar.debuggingBackground":"#5e81ac","statusBar.debuggingForeground":"#d8dee9","statusBar.foreground":"#d8dee9","statusBar.noFolderBackground":"#3b4252","statusBar.noFolderForeground":"#d8dee9","statusBarItem.activeBackground":"#4c566a","statusBarItem.hoverBackground":"#434c5e","statusBarItem.prominentBackground":"#3b4252","statusBarItem.prominentHoverBackground":"#434c5e","tab.activeBackground":"#3b4252","tab.activeBorder":"#88c0d000","tab.activeForeground":"#d8dee9","tab.border":"#3b425200","tab.hoverBackground":"#3b4252cc","tab.hoverBorder":"#88c0d000","tab.inactiveBackground":"#2e3440","tab.inactiveForeground":"#d8dee966","tab.unfocusedActiveBorder":"#88c0d000","tab.unfocusedActiveForeground":"#d8dee999","tab.unfocusedHoverBackground":"#3b4252b3","tab.unfocusedHoverBorder":"#88c0d000","tab.unfocusedInactiveForeground":"#d8dee966","widget.shadow":"#00000066",editorWidgetBorder:"#3b4252",errorForeground:"#bf616a",focusBorder:"#3b4252",foreground:"#d8dee9"}});var O={automaticLayout:!0,contextmenu:!1,fontSize:14,fontWeight:"400",minimap:{enabled:!1},scrollBeyondLastLine:!1,theme:"nord"},R=f.b.div(F()),S=function(e){function r(){var e,n;Object(d.a)(this,r);for(var o=arguments.length,t=new Array(o),a=0;a<o;a++)t[a]=arguments[a];return(n=Object(u.a)(this,(e=Object(s.a)(r)).call.apply(e,[this].concat(t)))).editorRootRef=p.a.createRef(),n.updateTypeDefinitions=function(){n.typeDefinitions&&n.typeDefinitions.dispose(),n.typeDefinitions=k.b.typescript.javascriptDefaults.addExtraLib(C(n.props.warriorAbilities))},n}return Object(l.a)(r,e),Object(c.a)(r,[{key:"componentDidMount",value:function(){var e=this,r=this.props,n=r.disabled,o=r.value;this.editor=k.a.create(this.editorRootRef.current,Object(v.a)({},O,{readOnly:n}));var t=k.a.createModel(o,"javascript");this.editor.setModel(t),this.subscription=t.onDidChangeContent(function(){e.props.onCodeChange(t.getValue())}),this.updateTypeDefinitions()}},{key:"componentDidUpdate",value:function(e){var r=this.props,n=r.disabled,o=r.value,t=r.warriorAbilities;n!==e.disabled&&this.editor.updateOptions({readOnly:n}),B()(t,e.warriorAbilities)||this.updateTypeDefinitions();var a=this.editor.getModel();o!==a.getValue()&&a.pushEditOperations([],[{range:a.getFullModelRange(),text:o}])}},{key:"componentWillUnmount",value:function(){this.editor&&this.editor.dispose(),this.subscription&&this.subscription.dispose(),this.typeDefinitions&&this.typeDefinitions.dispose()}},{key:"render",value:function(){return p.a.createElement(R,{innerRef:this.editorRootRef})}}]),r}(p.a.Component);S.defaultProps={disabled:!1};var H=S,j=n(74),D=n(17),E=n(151),T=n(58),I=n.n(T);function W(){var e=Object(g.a)(["\n  mutation Play(\n    $warriorId: UUID!\n    $playerCode: String!\n    $epic: Boolean!\n    $levelNumber: Int!\n    $playerCodeEpic: Boolean\n    $playerCodeLevelNumber: Int\n  ) {\n    play(\n      warriorId: $warriorId\n      playerCode: $playerCode\n      epic: $epic\n      levelNumber: $levelNumber\n    ) {\n      epic\n      levelNumber\n      newContent\n      warrior {\n        id\n        levelNumber\n        playerCode(epic: $playerCodeEpic, levelNumber: $playerCodeLevelNumber)\n        score\n        epic\n        averageGrade\n      }\n      results {\n        passed\n        events\n        score {\n          warrior\n          timeBonus\n          clearBonus\n          total\n          grade\n        }\n      }\n    }\n  }\n"]);return W=function(){return e},e}var $=I()(W());function N(){var e=Object(g.a)(["\n  query PlayerCode($warriorId: UUID!, $epic: Boolean, $levelNumber: Int) {\n    warrior(id: $warriorId) {\n      id\n      playerCode(epic: $epic, levelNumber: $levelNumber)\n      abilities(epic: $epic, levelNumber: $levelNumber)\n    }\n  }\n"]);return N=function(){return e},e}var V=I()(N()),x=n(165),G=n(7);function L(){var e=Object(g.a)(["\n  background-color: ",";\n  border: none;\n  color: ",";\n  cursor: pointer;\n  height: 3.5rem;\n  outline: none;\n  text-transform: uppercase;\n  width: 100%;\n\n  &:disabled {\n    opacity: 0.4;\n  }\n"]);return L=function(){return e},e}function M(){var e=Object(g.a)(["\n  border-top: 1px solid ",";\n  color: ",";\n  font-size: 0.9rem;\n  padding: 1rem;\n  white-space: pre;\n"]);return M=function(){return e},e}function U(){var e=Object(g.a)(["\n  flex: 1;\n  overflow-y: hidden;\n"]);return U=function(){return e},e}function P(){var e=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n"]);return P=function(){return e},e}var A="class Player {\n  /**\n   * Plays a warrior turn.\n   *\n   * @param {Warrior} warrior The warrior.\n   */\n  playTurn(warrior) {\n    // Cool code goes here\n  }\n}\n",q=f.b.form(P()),Q=f.b.div(U()),z=f.b.div(M(),G.c,G.e),J=f.b.button(L(),G.k,G.b),K=function(e){function r(){var e,n;Object(d.a)(this,r);for(var o=arguments.length,t=new Array(o),c=0;c<o;c++)t[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(r)).call.apply(e,[this].concat(t)))).handleInitialData=function(e){if("undefined"===typeof n.props.playerCode){var r=e.warrior.playerCode;n.props.onPlayerCodeChange(r||A)}},n.handlePlayData=function(e){n.props.onPlay(e.play)},n.handleSubmit=function(e,r){return function(){var o=Object(i.a)(a.a.mark(function o(t){var i,d,c,u,s,l,g,b;return a.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t.preventDefault(),i=n.props,d=i.warriorId,c=i.epic,u=i.levelNumber,s=i.playerCode,o.next=4,e.query({query:j.a});case 4:l=o.sent,g=l.data.currentUser,b=g?[{query:E.a,variables:{limit:10}},{query:E.a,variables:{limit:100}},{query:x.a,variables:{username:g.toLowerCase()}}]:[],r({variables:{epic:c,levelNumber:u,playerCode:s,warriorId:d,playerCodeEpic:c||void 0,playerCodeLevelNumber:!c&&u||void 0},refetchQueries:b});case 8:case"end":return o.stop()}},o,this)}));return function(e){return o.apply(this,arguments)}}()},n}return Object(l.a)(r,e),Object(c.a)(r,[{key:"render",value:function(){var e=this,r=this.props,n=r.disabled,t=r.epic,a=r.levelNumber,i=r.onPlayerCodeChange,d=r.playerCode,c=r.warriorId;return p.a.createElement(h.ApolloConsumer,null,function(r){return p.a.createElement(h.Mutation,{mutation:$,onCompleted:e.handlePlayData},function(u,s){var l=s.loading,g=s.error;return p.a.createElement(q,{disabled:n,onSubmit:e.handleSubmit(r,u)},p.a.createElement(Q,null,p.a.createElement(h.Query,{notifyOnNetworkStatusChange:!0,onCompleted:e.handleInitialData,query:V,variables:{warriorId:c,epic:t||void 0,levelNumber:!t&&a||void 0}},function(e){var r=e.loading,t=e.error,a=e.data;if(r||t||"undefined"===typeof d)return p.a.createElement(D.a,{error:t});var c=a.warrior.abilities,u=c.actions,s=c.senses,l=Object(o.a)(u).concat(Object(o.a)(s));return p.a.createElement(H,{disabled:n,onCodeChange:i,value:d,warriorAbilities:l})})),g&&p.a.createElement(z,null,"Error:"," ",g.graphQLErrors.map(function(e,r){var n=e.message;return p.a.createElement("span",{key:r},n)})),p.a.createElement(J,{type:"submit",disabled:n||l||!d},"Run!"))})})}}]),r}(p.a.Component);K.defaultProps={disabled:!1};r.default=K}}]);
//# sourceMappingURL=play-form.1a2c8c5c.chunk.js.map